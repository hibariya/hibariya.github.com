# 記事公開までの手順を楽にしたい

今時点でretterを使うとこんな感じの5ステップくらいで記事が公開できるようになる。

1. 記事を編集する (retter)
2. 記事を確認する (retter preview)
3. 記事を生成する (retter rebind)
4. 記事をコミットする (retter commit)
5. 記事をデプロイする (cd /path/to/foo && git push origin master)

手順のうち3-5（HTMLの生成から公開まで）は理不尽な手間で、本当は1つにまとめてしまいたい場合が多い。
手順3はいいとして、4と5について説明すると、

手順4はgitを使っているからcommitが必要で、サイト全体をgitで扱えるのは便利なんだけど普段はあまり意識したくない。
手順4を個別にやりたいときっていうのはとっても稀で、だから普段は、普通のソースコードのコミットと違って定期的に機械的にcommitされていれば十分。

手順5は、書く場所と公開する場所が違うせいでデプロイというかアップロードという作業が必要になってる。
これは本当は機械が気をきかせてやってくれるべき気がする。プレビューとかオフラインでの確認機能は用意しているので手順4のHTML生成をしたとき、だいたいは公開する気満々な筈。
ただ稀にだけど、これも個別にやりたいときがある気がする。

ということで、手順の細かさはこのままがいい、でも普段はショートカットしたい、という結論にたどり着いた。そうそう、ショートカット。
HTML生成以降の手順をショートカットした場合の手順を想像してみる。

1. 記事を編集する (retter)
2. 記事を確認する (retter preview)
3. 記事を生成・コミット・デプロイする (retter publish)

うーん、すっきりした気がする。次はretter publishの実装を考えようかな。やり方を2つ考えてみた。

1. 手順3-5を単純にまとめたサブコマンドをひとつ用意する
2. HTML生成にフックしていろいろできる機能を用意する

デプロイ方法としてgitだけではなくてrsyncとかもあり得るなら2がいい。


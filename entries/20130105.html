<!DOCTYPE html>
<html>
<head>
<title>2013-01-05 - Joy Luck Crab</title>
<meta charset='utf-8' />
<meta content='hibariya' name='author' />
<link href='/favicon.png' rel='icon' type='image/png' />
<link href="/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
<link href="/assets/application-a673872ce4e037479417b087073422d2.css" media="all" rel="stylesheet" />
<link href="http://coderwall.com/stylesheets/jquery.coderwall.css" media="all" rel="stylesheet" />
<link href="http://hibariya.github.com/entries.rss" rel="alternate" title="RSS" type="application/rss+xml" />
<script src="/assets/jquery-b89b172fc56a912408007bcc5c0f8370.js"></script>
<script src="http://coderwall.com/javascripts/jquery.coderwall.js"></script>
</head>
<body>
<header id='header'>
<h1>
<a href="/index.html">Joy Luck Crab</a>
</h1>
<nav>
<ul id='menu'>
<li><a href="/index.html">Home</a></li>
<li><a href="/about.html">About</a></li>
<li><a href="/entries.html">Archives</a></li>
<li><a href="/entries.rss" target="_blank">Feed</a></li>
</ul>
</nav>
</header>
<div id='page'>
<div id='content'><article class='article'>
<h1 class='date'><a href="/entries/20130105.html">2013-01-05</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20130105a0'>
<a href="/entries/20130105/a0.html">reditor gem を更新した</a>
</h1>
<p><a href="https://github.com/hibariya/reditor">Reditor</a> は、gem や pure ruby な Ruby 標準添付ライブラリを $EDITOR で開くためのコマンドラインツールで、インストールすると bundle open や gem edit に似たコマンド reditor を使えるようになる。
今回はライブラリが見つからなかったときに候補を出す機能を追加したのだった。</p><p>require するときは active_support なのに gem の名前は activesupport みたいな gem が結構あって、じゃあ reditor で開くときは今までどんな感じだったかというと、</p><pre class="highlight shell">  <span class="nv">$ </span>reditor activesupport  <span class="c"># 開ける</span>&#x000A;  <span class="nv">$ </span>reditor active_support <span class="c"># 開けない</span></pre><p>という感じ。
gem によって "アンダースコアが入るか入らないか" とか、他にも "名前が単数形か複数形か" とか忘れてしまうことは割とある。
開きたい gem を普段使っていなかったり gem の名前がキラキラしていれば尚更忘れやすい。
だけどこういう、名前を曖昧にしか思い出せないときにあっけなく失敗してしまうのは悲しい。
そこで、与えられた名前でライブラリを見つけられなかったときには候補っぽいものを出して選べるようにした。</p><pre class="highlight shell"><span class="gp">$ </span>reditor active_support&#x000A;<span class="o">[</span>0] actionmailer&#x000A;<span class="o">[</span>1] actionpack&#x000A;<span class="o">[</span>2] activemodel&#x000A;<span class="o">[</span>3] activerecord&#x000A;<span class="o">[</span>4] activeresource&#x000A;<span class="o">[</span>5] activesupport&#x000A;Choose number of library <span class="o">[</span>0]&gt; 5 <span class="c"># activesupport を開ける</span></pre><p>一覧は単純にソートしているだけで、本来なら activesupport が一番上に来て欲しいところだけど、それは追々。
gem の名前をある程度適当に与えても候補から選べるようになったので、思い出すための面倒な手間が減りそう。</p>
<h1 class='retter_entry_article' id='retter_entry_article_20130105a1'>
<a href="/entries/20130105/a1.html">cline gem を更新した</a>
</h1>
<p><a href="https://github.com/hibariya/cline">Cline</a> は、フィードとか GitHub の Activity を収集(一定周期でポーリング)してきて、terminal で簡単に垂れ流し表示するためにつくったやつ。</p><p>コミットログを見る感じだと数カ月ぶりのバージョンアップ。
<a href="https://rubygems.org/gems/cline/">cline</a> をリリースした。
サブコマンドの使い方が変わってしまったのでメジャーバージョンをひとつインクリメント。</p><h3>デーモン化できるようにした</h3><p>今の使い方だと screen を起動すると 3 つの cline プロセスが起動するようになっていて、ひとつあたりのメモリ使用量が割と多めなのだった。
この更新で、cline のサーバを起動できるようにして、サーバが起動していたらそれ以降に起動したプロセスは socket 越しにいろいろ取りに行くようにした。</p><p>起動とか停止とか:</p><pre class="highlight shell">  <span class="nv">$ </span>cline server start   <span class="c"># 起動</span>&#x000A;  <span class="nv">$ </span>cline server stop    <span class="c"># 停止</span>&#x000A;  <span class="nv">$ </span>cline server reload  <span class="c"># ~/.cline/config の再読み込み</span></pre><p>.zshrc などにこういうのを貼り付けておいて勝手に起動してくれるようにすると良さそう。</p><pre class="highlight shell"><span class="k">if</span> ! <span class="o">[</span> -e ~/.cline/cline.sock <span class="o">]</span> ; <span class="k">then&#x000A;  </span>cline server start&#x000A;<span class="k">fi</span></pre><h3>tick コマンドの使い方が変わった</h3><pre class="highlight shell">  <span class="nv">$ </span>cline tick OFFSET INTERVAL</pre><p>から</p><pre class="highlight shell">  <span class="nv">$ </span>cline tick INTERVAL OFFSET</pre><p>に変更。
どちらも省略できるのだけど、offset よりは interval だけを指定することの方が多そうなので入れ替え。</p>
</article>
</div>
<aside id='sidebar'>
<h3>Author</h3>
<div class='author'><a href="/about.html">hibariya</a></div>
<h3>Recent entries</h3>
<div class='recent-entries'>
<ul>
<li>
<a href="/entries/20140216/a0.html">Installing Gentoo linux with UEFI boot</a>
</li>
<li>
<a href="/entries/20140215/a0.html">Rewriting Retter gem</a>
</li>
<li>
<a href="/entries/20130418/a0.html">春から学生になった</a>
</li>
<li>
<a href="/entries/20130218/a0.html">東京競馬場へ馬をみにいった</a>
</li>
<li>
<a href="/entries/20130105/a0.html">reditor gem を更新した</a>
</li>
<li>
<a href="/entries/20130105/a1.html">cline gem を更新した</a>
</li>
</ul>
<div class='archives'><a href="/entries.html">Archives</a></div>
</div>
<h3>Coderwall</h3>
<div class='coderwall' data-coderwall-orientation='horizontal' data-coderwall-username='hibariya'></div>
</aside>
</div>
<footer id='footer'>
Joy Luck Crab (C) hibariya
Generated by
<a href='https://github.com/hibariya/retter' target='_blank'>Retter</a>
</footer>
</body>
</html>

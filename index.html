<!DOCTYPE html>
<html>
<head>
<title>Joy Luck Crab</title>
<meta charset='utf-8' />
<meta content='hibariya' name='author' />
<link href='/favicon.png' rel='icon' type='image/png' />
<link href="/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
<link href="/assets/application-a673872ce4e037479417b087073422d2.css" media="all" rel="stylesheet" />
<link href="http://hibariya.github.com/entries.rss" rel="alternate" title="RSS" type="application/rss+xml" />
</head>
<body>
<header id='header'>
<h1>
<a href="/index.html">Joy Luck Crab</a>
</h1>
<nav>
<ul id='menu'>
<li><a href="/index.html">Home</a></li>
<li><a href="/about.html">About</a></li>
<li><a href="/entries.html">Archives</a></li>
<li><a href="/entries.rss" target="_blank">Feed</a></li>
</ul>
</nav>
</header>
<div id='page'>
<div id='content'><div id='entries'>
<article class='article'>
<h1 class='date'><a href="/entries/20140216.html">2014-02-16</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20140216a0'>
<a href="/entries/20140216/a0.html">Rewriting Retter gem</a>
</h1>
<p>Next version will be 1.0.0 (<a href="https://github.com/hibariya/retter/compare/eccee81600d16eadba15e55e80e7fcf6200d83e2...85d36b27908664edf116020ee992b192a3c48612">Changes</a>).</p>
</article>
<article class='article'>
<h1 class='date'><a href="/entries/20130418.html">2013-04-18</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20130418a0'>
<a href="/entries/20130418/a0.html">春から学生になった</a>
</h1>
<p>4月に、帝京大学理工学部情報科学科に入学した。通信教育課程なので、お仕事は継続。
大学は <a href="http://mizzy.org/blog/2012/04/14/1/" target="_blank">mizzy さんのエントリ</a> のおかげで知った。</p><p>今年で28歳になった。
10年前、本に関わる仕事をしようと思って編集の専門学校に進んだ。
それはそれなりにためになったけど、途中でもっと楽しいことを見つけて、まもなく小さな出版社を後にした。</p><p>コードを書くのは楽しい。
このまま30年後もコードを書いていられるといいな。
ずっとコードを書くなら、もっと上手になるための努力は惜しまなくて良さそう。
だからちゃんと学ぼうと思う。</p>
</article>
<article class='article'>
<h1 class='date'><a href="/entries/20130218.html">2013-02-18</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20130218a0'>
<a href="/entries/20130218/a0.html">東京競馬場へ馬をみにいった</a>
</h1>
<p>前の2日間ほとんど自宅にこもって作業していたらとうとう集中できなくなったので、日曜日は奥さんと馬を見に行くことになった。
競馬について何も知らないまま府中にある東京競馬場に行ったら、フェブラリーステークスといわれる割と大事そうなレースをやっていた。</p><p>天気の良い日に目の前を全力で走っている馬を見るのはとっても刺激的で良い気分転換になるのでおすすめ。
馬が走るのはだいたい30分に1回なので、その間次のレースの予想をしてごく少額(100円とか)で適当に投票すると多少エキサイティングかもしれない。
あとは、次のレースに出る馬のお披露目をする場所みたいなのもあって、よく手入れされた馬は綺麗なのでいちど見ておくと良さそう。</p><p>東京競馬場は広くて比較的キレイで過ごしやすかった。
馬をみる席からは富士山も眺められる。
JRAのサイトは使いづらいのでどうにかしてほしい。</p>
</article>
<article class='article'>
<h1 class='date'><a href="/entries/20130105.html">2013-01-05</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20130105a0'>
<a href="/entries/20130105/a0.html">reditor gem を更新した</a>
</h1>
<p><a href="https://github.com/hibariya/reditor">Reditor</a> は、gem や pure ruby な Ruby 標準添付ライブラリを $EDITOR で開くためのコマンドラインツールで、インストールすると bundle open や gem edit に似たコマンド reditor を使えるようになる。
今回はライブラリが見つからなかったときに候補を出す機能を追加したのだった。</p><p>require するときは active_support なのに gem の名前は activesupport みたいな gem が結構あって、じゃあ reditor で開くときは今までどんな感じだったかというと、</p><pre class="highlight shell">  <span class="nv">$ </span>reditor activesupport  <span class="c"># 開ける</span>
  <span class="nv">$ </span>reditor active_support <span class="c"># 開けない</span>
</pre><p>という感じ。
gem によって "アンダースコアが入るか入らないか" とか、他にも "名前が単数形か複数形か" とか忘れてしまうことは割とある。
開きたい gem を普段使っていなかったり gem の名前がキラキラしていれば尚更忘れやすい。
だけどこういう、名前を曖昧にしか思い出せないときにあっけなく失敗してしまうのは悲しい。
そこで、与えられた名前でライブラリを見つけられなかったときには候補っぽいものを出して選べるようにした。</p><pre class="highlight shell"><span class="gp">$ </span>reditor active_support
<span class="o">[</span>0] actionmailer
<span class="o">[</span>1] actionpack
<span class="o">[</span>2] activemodel
<span class="o">[</span>3] activerecord
<span class="o">[</span>4] activeresource
<span class="o">[</span>5] activesupport
Choose number of library <span class="o">[</span>0]&gt; 5 <span class="c"># activesupport を開ける</span>
</pre><p>一覧は単純にソートしているだけで、本来なら activesupport が一番上に来て欲しいところだけど、それは追々。
gem の名前をある程度適当に与えても候補から選べるようになったので、思い出すための面倒な手間が減りそう。</p>
<h1 class='retter_entry_article' id='retter_entry_article_20130105a1'>
<a href="/entries/20130105/a1.html">cline gem を更新した</a>
</h1>
<p><a href="https://github.com/hibariya/cline">Cline</a> は、フィードとか GitHub の Activity を収集(一定周期でポーリング)してきて、terminal で簡単に垂れ流し表示するためにつくったやつ。</p><p>コミットログを見る感じだと数カ月ぶりのバージョンアップ。
<a href="https://rubygems.org/gems/cline/">cline</a> をリリースした。
サブコマンドの使い方が変わってしまったのでメジャーバージョンをひとつインクリメント。</p><h3>デーモン化できるようにした</h3><p>今の使い方だと screen を起動すると 3 つの cline プロセスが起動するようになっていて、ひとつあたりのメモリ使用量が割と多めなのだった。
この更新で、cline のサーバを起動できるようにして、サーバが起動していたらそれ以降に起動したプロセスは socket 越しにいろいろ取りに行くようにした。</p><p>起動とか停止とか:</p><pre class="highlight shell">  <span class="nv">$ </span>cline server start   <span class="c"># 起動</span>
  <span class="nv">$ </span>cline server stop    <span class="c"># 停止</span>
  <span class="nv">$ </span>cline server reload  <span class="c"># ~/.cline/config の再読み込み</span>
</pre><p>.zshrc などにこういうのを貼り付けておいて勝手に起動してくれるようにすると良さそう。</p><pre class="highlight shell"><span class="k">if</span> ! <span class="o">[</span> -e ~/.cline/cline.sock <span class="o">]</span> ; <span class="k">then
  </span>cline server start
<span class="k">fi</span>
</pre><h3>tick コマンドの使い方が変わった</h3><pre class="highlight shell">  <span class="nv">$ </span>cline tick OFFSET INTERVAL
</pre><p>から</p><pre class="highlight shell">  <span class="nv">$ </span>cline tick INTERVAL OFFSET
</pre><p>に変更。
どちらも省略できるのだけど、offset よりは interval だけを指定することの方が多そうなので入れ替え。</p>
</article>
<article class='article'>
<h1 class='date'><a href="/entries/20130102.html">2013-01-02</a></h1>
<h1 class='retter_entry_article' id='retter_entry_article_20130102a0'>
<a href="/entries/20130102/a0.html">PROMPTを2階建てにした</a>
</h1>
<p>結構前からだったのだけど、oh-my-zsh が割と良くて乗り換えたはいいが気に入ったテーマだけは見つからなかったので自分で適当に変えたのだった。
いままでは雑多な情報はRPROMPTに出すようにしていたのだけど、同僚から影響を受けて二階建てに。
(Kinesis といい Funtoo といい、去年は何かと影響を受けまくり)</p><p><img src="/images/prompt_2013_1.png" alt="prompt_2013_1"></p><p>カスタマイズしているうちにごちゃごちゃしてしまった <a href="https://github.com/hibariya/config/blob/a7368884c6b39dff628ef9fc75ce595a5a96d878/_zsh/oh-my-zsh#L56">PROMPT</a> が出しているのはこんなの。</p><ul>
<li>ユーザ@ホスト:今居る場所</li>
<li>時刻</li>
<li>直前のコマンドの戻り値</li>
<li>Ruby のバージョン</li>
<li>git リポジトリの状態・ハッシュの先頭数文字・ブランチ</li>
<li>$SHLVL</li>
</ul>
<p>いろいろ表示している情報はたまに便利に思うこともあるけど、割と自己満足なので<code>PROMPT="%% "</code>とかにしてもたぶん生活には困らない。</p><p>今年もよろしくお願いします。</p>
</article>
</div>
</div>
<aside id='sidebar'>
<h3>Author</h3>
<div class='author'><a href="/about.html">hibariya</a></div>
<h3>Recent entries</h3>
<div class='recent-entries'>
<ul>
<li>
<a href="/entries/20140216/a0.html">Rewriting Retter gem</a>
</li>
<li>
<a href="/entries/20130418/a0.html">春から学生になった</a>
</li>
<li>
<a href="/entries/20130218/a0.html">東京競馬場へ馬をみにいった</a>
</li>
<li>
<a href="/entries/20130105/a0.html">reditor gem を更新した</a>
</li>
<li>
<a href="/entries/20130105/a1.html">cline gem を更新した</a>
</li>
<li>
<a href="/entries/20130102/a0.html">PROMPTを2階建てにした</a>
</li>
</ul>
<div class='archives'><a href="/entries.html">Archives</a></div>
</div>
</aside>
</div>
<footer id='footer'>
Joy Luck Crab (C) hibariya
</footer>
</body>
</html>
